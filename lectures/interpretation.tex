% Compile with XeLaTeX, TeXLive 2013 or more recent
\input{../common/config}

\title{Моделирование центрального процессора с помощью интерпретации}
\author[Евгений Юлюгин]{Евгений Юлюгин \\ \small{\href{mailto:yulyugin@gmail.com}{yulyugin@gmail.com}}}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\section*{Обзор}

\begin{frame}{На прошлой лекции}
\end{frame}

\begin{frame}{На этой лекции}
\tableofcontents
\end{frame} 

% Use [fragile] option to insert listings
% \begin{frame}[fragile]

\section{Цикл работы процессора}

\begin{frame}{Цикл работы процессора}
\centering
\inputpicture{interp-cycle-expanded}
\end{frame}

\begin{frame}[fragile]{Переключаемый интерпретатор (switched)}
\begin{lstlisting}
while (run) {
    raw_code = fetch(PC);
    (opcode, operands) = decode(raw_code);
    switch (opcode) {

    case opcode1:
        func1(operands); PC++; break;

    case opcode2:
        func2(operands); PC++; break;

    /*...*/
    }
}
\end{lstlisting}
\end{frame}

\begin{frame}{Уточненный цикл работы}
\centering
\resizebox{9cm}{7cm}{
\inputpicture{interp-cycle-expanded-exception}
}
\end{frame}

\section{Fetch}

\begin{frame}{Чтение инструкции из памяти}

<<Простое>> чтение байт из памяти?

\pause

\begin{itemize}
    \item Невыровненный (\abbr unaligned) адрес в памяти. \\
    \pause
    Вызывает эффекты в некоторых архитектурах.
    \pause
    \item Доступ на границе двух страниц памяти. \\
    \pause
    Разные страницы могут иметь разные характеристики.
\end{itemize}

\end{frame}

\begin{frame}{Порядок байт при доступах}

\begin{itemize}
    \item Порядок от младшего к старшему (\abbr little-endian);
    \item Порядок от старшего к младшему (\abbr big-endian);
    \item Смешанный порядок (\abbr middle-endian).
\end{itemize}

\pause

\begin{table}[htpb]
    \centering
    \begin{tabular}{|l|l|}
    \hline
    Представление   &   D4 + C3 * 100 + B2 * 10000 + A1 * 1000000   \\
    \hline
    Little-endian   &   D4, C3, B2, A1                              \\
    \hline
    Big-endian      &   A1, B2, C3, D4                              \\
    \hline
    \end{tabular}
\end{table}

\end{frame}

\begin{frame}{Бит, байт, слово}

Бит \pause --- наименьшая единица информации.

\bigskip
\pause

Байт \pause --- минимальная адресуемая (в данной архитектуре) единица хранения
информации.

\bigskip
\pause

Октет --- восемь бит.

\bigskip
\pause

Машинное слово \pause --- максимальный объём информации, который ЦПУ может
обработать единовременно.

\bigskip
\pause

Intel: word — 16 бит, dword — 32 бит, qword — 64 бит.

\end{frame}

\section{Decode}

\begin{frame}{Анатомия инструкции}
\centering
\inputpicture{instruction-anatomy}
\end{frame}

\section{Execute}

\section{Write Back}

\section{Advance PC}

\section*{Конец}
% The final "thank you" frame 

\begin{frame}{На следующей лекции}
\end{frame}

\begin{frame}

{\huge{Спасибо за внимание!}\par}

\vfill

\tiny{\textit{Замечание}: все торговые марки и логотипы, использованные в данном материале, являются собственностью их владельцев. Представленная здесь точка зрения отражает личное мнение автора, не выступающего от лица какой-либо организации.}

\end{frame}

\end{document}
